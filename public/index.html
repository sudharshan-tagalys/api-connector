<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Search and search suggestions</title>
    <input id="search-input" placeholder="Search" name="search" />
    <script src="https://storage.googleapis.com/tagalys-front-end-components/tagalys-api-connector-1.3.9.min.js" defer></script>
  </head>

  <body>
    <script>
      // product meta
      var meta = {
        page: {
          pageType: "product",
          resourceType: "product",
          resourceId: 8173384499440,
        },
      };

      // collection meta
      var meta = {
        page: {
          pageType: "collection",
          resourceType: "collection",
          resourceId: 405701329136,
        },
      };

      function initializeSearchSuggestions() {
        return Tagalys.APIConnector.SearchSuggestions.new({
          params: {
            query: "light",
          },
          onSuccess: function (response, helpers) {
            console.log("response for search suggestions", response);
          },
          onFailure: function (response, helpers) {
            console.log("FFFFFAAAAAAAAAAILED");
          },
        });
      }

      var setTagalysConfiguration = function () {
        Tagalys.setConfiguration({
          api: {
            serverUrl: "https://api-r4.tagalys.com",
            credentials: {
              clientCode: "1464A4DB86C0655F",
              apiKey: "868e5382cda327f5bf779739b3d8498f",
            },
            storeId: "80075489573",
          },
          platform: "Shopify",
          locale: "en-GB",
          currency: {
            displayFormatter: "{{currencyLabel}}{{value}}",
            code: "GBP",
            label: "Â£",
            fractionalDigits: 2,
            forceFractionalDigits: true,
          },
        });
      };

      var onTagalysReady = function (callback) {
        window.addEventListener("DOMContentLoaded", function () {
          setTagalysConfiguration();
          callback();
        });
      };

      onTagalysReady(function () {
        ss = initializeSearchSuggestions();
        ss.helpers.call();
      });
    </script>
  </body>
</html>
