<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Search and search suggestions</title>
  <input id="search-input" placeholder="Search" name="search" />
  <script src="./bundle.js" defer></script>
</head>

<body>
  <script>

    // product meta
    var meta = {
      "page": {
        "pageType": "product",
        "resourceType": "product",
        "resourceId": 8173384499440
      }
    }

    // collection meta
    var meta = {
      "page": {
        "pageType": "collection",
        "resourceType": "collection",
        "resourceId": 405701329136
      }
    }

    function initializeSearchSuggestions() {
      return Tagalys.APIConnector.SearchSuggestions.new({
        params: {
          query: "dress",
        },
        onSuccess: function (response, helpers) {
          console.log("response for search suggestions", response);
        },
        onFailure: function (response, helpers) {
          console.log("FFFFFAAAAAAAAAAILED")
        },
      });
    }

    var setTagalysConfiguration = function () {
      Tagalys.setConfiguration({
        track: true,
        analyticsStorageConsentProvided: () => {
          return true
        },
        api: {
          serverUrl: "https://stage2-api.tagalys.com",
          credentials: {
            clientCode: "1764BCF042C48910",
            apiKey: "6201e9db3b4a772065bafe7c31ecf3a6",
          },
          storeId: "64491782384",
        },
        platform: "Shopify",
        locale: "en-US",
        currency: {
          displayFormatter: "{{currencyLabel}}{{value}}",
          code: "USD",
          label: "$",
          fractionalDigits: 2,
          forceFractionalDigits: true,
        },
        countryCode: "US",
        track: true,
        analyticsStorageConsentProvided: function(){
          return false
        }
      });
    }

    var onTagalysReady = function (callback) {
      window.addEventListener("DOMContentLoaded", function () {
        setTagalysConfiguration()
        callback()
      })
    }

    onTagalysReady(function () {
      ss = initializeSearchSuggestions()
      ss.helpers.call()
    })

  </script>
</body>

</html>