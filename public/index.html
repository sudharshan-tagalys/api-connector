<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Search and search suggestions</title>
    <input id="search-input" placeholder="Search" name="search" />
    <script
      src="../dist/client/bundle.js"
      defer
    ></script>
  </head>

  <body>
    <script>
      // product meta
      var meta = {
        page: {
          pageType: "product",
          resourceType: "product",
          resourceId: 8173384499440,
        },
      };

      // collection meta
      var meta = {
        page: {
          pageType: "collection",
          resourceType: "collection",
          resourceId: 405701329136,
        },
      };

      function initializeSearchSuggestions() {
        return Tagalys.APIConnector.SearchResults.new({
          params: {
            query: "light",
          },
          onSuccess: function (response, helpers) {
            console.log("response for search suggestions", response);
          },
          onFailure: function (response, helpers) {
            console.log("FFFFFAAAAAAAAAAILED");
          },
          track: false
        });
      }

      var setTagalysConfiguration = function () {
        Tagalys.setConfiguration({
          api: {
            serverUrl: "https://api-r4.tagalys.com",
            credentials: {
              clientCode: "FD1FB1C1A4448D69",
              apiKey: "a27b1d687dfb419e7a4029396e48a740",
            },
            storeId: "63651545319",
          },
          platform: "Shopify",
          locale: "en-US",
          currency: {
            displayFormatter: "{{currencyLabel}}{{value}}",
            code: "USD",
            label: "$",
            fractionalDigits: 2,
            forceFractionalDigits: true,
          },
          track: true,
          analyticsStorageConsentProvided: function(){
            return true
          },
          countryCode: "US",
          baseCountryCode: "IN",
          platformVariables: {
            waitForStoreFrontAPI: true,
            useStoreFrontAPIForProductPrices: true,
            storeFrontAPIAccessToken: "ed57b92722d5dff47f901908e9552f73",
            myShopifyDomain: "replication-two.myshopify.com",
          },
        });
      };

      var onTagalysReady = function (callback) {
        window.addEventListener("DOMContentLoaded", function () {
          setTagalysConfiguration();
          callback();
        });
      };

      var initSmartWidget = function () {
        Tagalys.APIConnector.SmartWidget.call({
          params: {
            widgetId: "d5899dc647dd6cdcd04b",
          },
          waitForStoreFrontAPI: true
        });
      };

      onTagalysReady(function () {
        ss = initializeSearchSuggestions();
        ss.helpers.call();
        initSmartWidget()
      });
    </script>
  </body>
</html>
